(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,a,t){e.exports=t.p+"static/media/paint8.cfb88892.png"},24:function(e,a,t){e.exports=t(60)},51:function(e,a,t){},58:function(e,a,t){},60:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),s=t(16),l=t.n(s),c=t(62),i=t(17),r=t(18),m=t(19),d=t(22),u=t(20),h=t(23),g=t(8),p=t(21),E=t.n(p),f=t(5),v=t.n(f),N="/upload",b="/logout",y="/playmood",L=function(e){function a(e){var t;return Object(r.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).change=function(e){t.setState(Object(i.a)({},e.target.name,e.target.value))},t.componentDidMount=function(){t.isLoggedIn()},t.isLoggedIn=function(){v.a.get("".concat(g.backendUrl,"user/auth/isloggedin"),{withCredentials:!0}).then(function(e){t.setState({isLoggedIn:!0,username:e.data.username})}).catch(function(e){t.setState({isLoggedIn:!1})})},t.handleselectedFile=function(e){t.setState({selectedFile:e.target.files[0],loaded:0})},t.handleUpload=function(){var e=new FormData;e.append("file",t.state.selectedFile,t.state.selectedFile.name),v.a.post(N,e,{onUploadProgress:function(e){t.setState({loaded:e.loaded/e.total*100,loading:!0})}}).then(function(e){t.setState({joy:!1}),t.setState({sorrow:!1});var a=e.data[0].faceAnnotations[0].joyLikelihood,n=e.data[0].faceAnnotations[0].angerLikelihood,o=e.data[0].faceAnnotations[0].sorrowLikelihood,s="0",l="1",c="0",i="1";"VERY_LIKELY"!==a&&"LIKELY"!==a&&"POSSIBLE"!==a||(t.setState({joy:!0}),s="0.7",c="0.7"),"VERY_LIKELY"!==o&&"LIKELY"!==o&&"VERY_UNLIKELY"!==a||(t.setState({sorrow:!0}),s="0",l="0.4",i="0.5"),"VERY_LIKELY"!==n&&"LIKELY"!==n||(t.setState({anger:!0,joy:!1}),l="0.5",c="0.8"),console.log(c),console.log(s),v.a.post(y,{withCredentials:!0,min_valence:s,max_valence:l,min_danceability:c,max_danceability:i,min_tempo:"0",max_tempo:"100"}).then(function(e){t.setState({preview:e.data,hasTracks:!0})}).catch(function(e){console.log(e)})}).catch(function(e){})},t.handleLogout=function(){v.a.get(b,{withCredentials:!0}).then(function(e){t.setState({isLoggedIn:null})}).catch(function(e){console.log(e)})},t.state={selectedFile:null,loaded:0,loading:!1,isLoggedIn:!1,username:"",hasTracks:!1,joy:!1,sorrow:!1,anger:!1,preview:""},t}return Object(h.a)(a,e),Object(m.a)(a,[{key:"renderMood",value:function(){return this.state.joy?o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",{className:"monospace"},"You look quite happy..."),o.a.createElement("h3",{className:"monospace mb-5"},"Let's play something ecstatic.")):this.state.sorrow?o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",{className:"monospace"},"Mmm, you seem down..."),o.a.createElement("h3",{className:"monospace mb-5"},"I think this song fits your mood.")):this.state.anger?o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",{className:"monospace"},"Angry?!?!?!"),o.a.createElement("h3",{className:"monospace mb-5"},"Listen to this!!")):void 0}},{key:"renderLoading",value:function(){if(this.state.loading)return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{className:"monospace"},"Analyzing..."))}},{key:"renderAudio",value:function(){return this.state.hasTracks?o.a.createElement(o.a.Fragment,null,o.a.createElement(E.a,{src:this.state.preview,controls:!0})):this.state.hasTracks?void 0:o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",{className:"monospace"},"Upload a selfie..."),o.a.createElement("div",{className:"monospace fs30"},Math.round(this.state.loaded,2)," %",o.a.createElement("div",null,this.renderLoading())),o.a.createElement("div",{className:"input-group"},o.a.createElement("div",{className:"file-input-wrapper"},o.a.createElement("button",{className:"btn-file-input green"},"Choose image"),o.a.createElement("input",{type:"file",name:"blabla",onChange:this.handleselectedFile})),o.a.createElement("span",{className:"input-group-btn"},o.a.createElement("button",{className:"btn btn-default ml-3 white_bg",type:"button",onClick:this.handleUpload},"Upload")),o.a.createElement("h2",{className:"mb-5 monospace mt-2"},"...and moodplay will play you mood.")))}},{key:"render",value:function(){return this.state.isLoggedIn?o.a.createElement("header",{className:"masthead"},o.a.createElement("div",{className:"container h-100"},o.a.createElement("div",{className:"row h-100"},o.a.createElement("div",{className:"col-lg-6 my-auto"},o.a.createElement("div",{className:"header-content mx-auto"},o.a.createElement("div",{className:"App"},o.a.createElement("button",{onClick:this.handleLogout,className:"btn btn-outline btn-sm js-scroll-trigger green"},"Logout"),o.a.createElement("h3",{className:"mb-5 mt-3 monospace"},"Hi ",this.state.username,","),this.renderMood(),this.renderAudio()),o.a.createElement("br",null))),o.a.createElement("div",{className:"col-lg-6 my-auto"},o.a.createElement("div",{className:"device"},o.a.createElement("div",{className:"screen"},o.a.createElement("img",{src:t(15),className:"img-fluid",alt:""})),o.a.createElement("div",{className:"button"})))))):o.a.createElement("header",{className:"masthead"},o.a.createElement("div",{className:"container h-100"},o.a.createElement("div",{className:"row h-100"},o.a.createElement("div",{className:"col-lg-6 my-auto"},o.a.createElement("div",{className:"header-content mx-auto"},o.a.createElement("h1",{className:"mb-5 monospace"},"MoodPlay plays music based on your mood..."," "),o.a.createElement("a",{href:"".concat(g.backendUrl,"user/auth/spotify"),className:"btn btn-outline btn-xl js-scroll-trigger"},"Login with Spotify"))),o.a.createElement("div",{className:"col-lg-6 my-auto"},o.a.createElement("div",{className:"device-mockup iphone6_plus portrait white"},o.a.createElement("div",{className:"device"},o.a.createElement("div",{className:"screen"},o.a.createElement("img",{src:t(15),className:"img-fluid",alt:""})),o.a.createElement("div",{className:"button"})))))))}}]),a}(n.Component);t(51),t(54),t(56),t(58),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(c.a,null,o.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e){e.exports={backendUrl:"http://localhost:3001/"}}},[[24,2,1]]]);
//# sourceMappingURL=main.65e84937.chunk.js.map